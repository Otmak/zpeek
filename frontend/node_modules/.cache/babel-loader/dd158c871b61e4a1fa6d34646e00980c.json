{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\nvar _slicedToArray = function () {\n  function sliceIterator(arr, i) {\n    var _arr = [];\n    var _n = true;\n    var _d = false;\n    var _e = undefined;\n\n    try {\n      for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n        _arr.push(_s.value);\n\n        if (i && _arr.length === i) break;\n      }\n    } catch (err) {\n      _d = true;\n      _e = err;\n    } finally {\n      try {\n        if (!_n && _i[\"return\"]) _i[\"return\"]();\n      } finally {\n        if (_d) throw _e;\n      }\n    }\n\n    return _arr;\n  }\n\n  return function (arr, i) {\n    if (Array.isArray(arr)) {\n      return arr;\n    } else if (Symbol.iterator in Object(arr)) {\n      return sliceIterator(arr, i);\n    } else {\n      throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n    }\n  };\n}();\n\nvar _createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\nexports.default = sortableContainer;\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = require('prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _reactDom = require('react-dom');\n\nvar _invariant = require('invariant');\n\nvar _invariant2 = _interopRequireDefault(_invariant);\n\nvar _Manager = require('../Manager');\n\nvar _Manager2 = _interopRequireDefault(_Manager);\n\nvar _utils = require('../utils');\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _toConsumableArray(arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) {\n      arr2[i] = arr[i];\n    }\n\n    return arr2;\n  } else {\n    return Array.from(arr);\n  }\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n} // Export Higher Order Sortable Container Component\n\n\nfunction sortableContainer(WrappedComponent) {\n  var _class, _temp;\n\n  var config = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {\n    withRef: false\n  };\n  return _temp = _class = function (_Component) {\n    _inherits(_class, _Component);\n\n    function _class(props) {\n      _classCallCheck(this, _class);\n\n      var _this = _possibleConstructorReturn(this, (_class.__proto__ || Object.getPrototypeOf(_class)).call(this, props));\n\n      _this.handleStart = function (e) {\n        var _this$props = _this.props,\n            distance = _this$props.distance,\n            shouldCancelStart = _this$props.shouldCancelStart;\n\n        if (e.button === 2 || shouldCancelStart(e)) {\n          return false;\n        }\n\n        _this._touched = true;\n        _this._pos = {\n          x: e.pageX,\n          y: e.pageY\n        };\n        var node = (0, _utils.closest)(e.target, function (el) {\n          return el.sortableInfo != null;\n        });\n\n        if (node && node.sortableInfo && _this.nodeIsChild(node) && !_this.state.sorting) {\n          var useDragHandle = _this.props.useDragHandle;\n          var _node$sortableInfo = node.sortableInfo,\n              index = _node$sortableInfo.index,\n              collection = _node$sortableInfo.collection;\n          if (useDragHandle && !(0, _utils.closest)(e.target, function (el) {\n            return el.sortableHandle != null;\n          })) return;\n          _this.manager.active = {\n            index: index,\n            collection: collection\n          };\n          /*\n          * Fixes a bug in Firefox where the :active state of anchor tags\n          * prevent subsequent 'mousemove' events from being fired\n          * (see https://github.com/clauderic/react-sortable-hoc/issues/118)\n          */\n\n          if (e.target.tagName.toLowerCase() === 'a') {\n            e.preventDefault();\n          }\n\n          if (!distance) {\n            if (_this.props.pressDelay === 0) {\n              _this.handlePress(e);\n            } else {\n              _this.pressTimer = setTimeout(function () {\n                return _this.handlePress(e);\n              }, _this.props.pressDelay);\n            }\n          }\n        }\n      };\n\n      _this.nodeIsChild = function (node) {\n        return node.sortableInfo.manager === _this.manager;\n      };\n\n      _this.handleMove = function (e) {\n        var _this$props2 = _this.props,\n            distance = _this$props2.distance,\n            pressThreshold = _this$props2.pressThreshold;\n\n        if (!_this.state.sorting && _this._touched) {\n          _this._delta = {\n            x: _this._pos.x - e.pageX,\n            y: _this._pos.y - e.pageY\n          };\n          var delta = Math.abs(_this._delta.x) + Math.abs(_this._delta.y);\n\n          if (!distance && (!pressThreshold || pressThreshold && delta >= pressThreshold)) {\n            clearTimeout(_this.cancelTimer);\n            _this.cancelTimer = setTimeout(_this.cancel, 0);\n          } else if (distance && delta >= distance && _this.manager.isActive()) {\n            _this.handlePress(e);\n          }\n        }\n      };\n\n      _this.handleEnd = function () {\n        var distance = _this.props.distance;\n        _this._touched = false;\n\n        if (!distance) {\n          _this.cancel();\n        }\n      };\n\n      _this.cancel = function () {\n        if (!_this.state.sorting) {\n          clearTimeout(_this.pressTimer);\n          _this.manager.active = null;\n        }\n      };\n\n      _this.handlePress = function (e) {\n        var active = _this.manager.getActive();\n\n        if (active) {\n          var _this$props3 = _this.props,\n              axis = _this$props3.axis,\n              getHelperDimensions = _this$props3.getHelperDimensions,\n              helperClass = _this$props3.helperClass,\n              hideSortableGhost = _this$props3.hideSortableGhost,\n              onSortStart = _this$props3.onSortStart,\n              useWindowAsScrollContainer = _this$props3.useWindowAsScrollContainer;\n          var node = active.node,\n              collection = active.collection;\n          var index = node.sortableInfo.index;\n          var margin = (0, _utils.getElementMargin)(node);\n\n          var containerBoundingRect = _this.container.getBoundingClientRect();\n\n          var dimensions = getHelperDimensions({\n            index: index,\n            node: node,\n            collection: collection\n          });\n          _this.node = node;\n          _this.margin = margin;\n          _this.width = dimensions.width;\n          _this.height = dimensions.height;\n          _this.marginOffset = {\n            x: _this.margin.left + _this.margin.right,\n            y: Math.max(_this.margin.top, _this.margin.bottom)\n          };\n          _this.boundingClientRect = node.getBoundingClientRect();\n          _this.containerBoundingRect = containerBoundingRect;\n          _this.index = index;\n          _this.newIndex = index;\n          _this.axis = {\n            x: axis.indexOf('x') >= 0,\n            y: axis.indexOf('y') >= 0\n          };\n          _this.offsetEdge = _this.getEdgeOffset(node);\n          _this.initialOffset = _this.getOffset(e);\n          _this.initialScroll = {\n            top: _this.scrollContainer.scrollTop,\n            left: _this.scrollContainer.scrollLeft\n          };\n          _this.initialWindowScroll = {\n            top: window.pageYOffset,\n            left: window.pageXOffset\n          };\n          var fields = node.querySelectorAll('input, textarea, select');\n          var clonedNode = node.cloneNode(true);\n          var clonedFields = [].concat(_toConsumableArray(clonedNode.querySelectorAll('input, textarea, select'))); // Convert NodeList to Array\n\n          clonedFields.forEach(function (field, index) {\n            if (field.type !== 'file' && fields[index]) {\n              field.value = fields[index].value;\n            }\n          });\n          _this.helper = _this.document.body.appendChild(clonedNode);\n          _this.helper.style.position = 'fixed';\n          _this.helper.style.top = _this.boundingClientRect.top - margin.top + 'px';\n          _this.helper.style.left = _this.boundingClientRect.left - margin.left + 'px';\n          _this.helper.style.width = _this.width + 'px';\n          _this.helper.style.height = _this.height + 'px';\n          _this.helper.style.boxSizing = 'border-box';\n          _this.helper.style.pointerEvents = 'none';\n\n          if (hideSortableGhost) {\n            _this.sortableGhost = node;\n            node.style.visibility = 'hidden';\n            node.style.opacity = 0;\n          }\n\n          _this.minTranslate = {};\n          _this.maxTranslate = {};\n\n          if (_this.axis.x) {\n            _this.minTranslate.x = (useWindowAsScrollContainer ? 0 : containerBoundingRect.left) - _this.boundingClientRect.left - _this.width / 2;\n            _this.maxTranslate.x = (useWindowAsScrollContainer ? _this.contentWindow.innerWidth : containerBoundingRect.left + containerBoundingRect.width) - _this.boundingClientRect.left - _this.width / 2;\n          }\n\n          if (_this.axis.y) {\n            _this.minTranslate.y = (useWindowAsScrollContainer ? 0 : containerBoundingRect.top) - _this.boundingClientRect.top - _this.height / 2;\n            _this.maxTranslate.y = (useWindowAsScrollContainer ? _this.contentWindow.innerHeight : containerBoundingRect.top + containerBoundingRect.height) - _this.boundingClientRect.top - _this.height / 2;\n          }\n\n          if (helperClass) {\n            var _this$helper$classLis;\n\n            (_this$helper$classLis = _this.helper.classList).add.apply(_this$helper$classLis, _toConsumableArray(helperClass.split(' ')));\n          }\n\n          _this.listenerNode = e.touches ? node : _this.contentWindow;\n\n          _utils.events.move.forEach(function (eventName) {\n            return _this.listenerNode.addEventListener(eventName, _this.handleSortMove, false);\n          });\n\n          _utils.events.end.forEach(function (eventName) {\n            return _this.listenerNode.addEventListener(eventName, _this.handleSortEnd, false);\n          });\n\n          _this.setState({\n            sorting: true,\n            sortingIndex: index\n          });\n\n          if (onSortStart) onSortStart({\n            node: node,\n            index: index,\n            collection: collection\n          }, e);\n        }\n      };\n\n      _this.handleSortMove = function (e) {\n        var onSortMove = _this.props.onSortMove;\n        e.preventDefault(); // Prevent scrolling on mobile\n\n        _this.updatePosition(e);\n\n        _this.animateNodes();\n\n        _this.autoscroll();\n\n        if (onSortMove) onSortMove(e);\n      };\n\n      _this.handleSortEnd = function (e) {\n        var _this$props4 = _this.props,\n            hideSortableGhost = _this$props4.hideSortableGhost,\n            onSortEnd = _this$props4.onSortEnd;\n        var collection = _this.manager.active.collection; // Remove the event listeners if the node is still in the DOM\n\n        if (_this.listenerNode) {\n          _utils.events.move.forEach(function (eventName) {\n            return _this.listenerNode.removeEventListener(eventName, _this.handleSortMove);\n          });\n\n          _utils.events.end.forEach(function (eventName) {\n            return _this.listenerNode.removeEventListener(eventName, _this.handleSortEnd);\n          });\n        } // Remove the helper from the DOM\n\n\n        _this.helper.parentNode.removeChild(_this.helper);\n\n        if (hideSortableGhost && _this.sortableGhost) {\n          _this.sortableGhost.style.visibility = '';\n          _this.sortableGhost.style.opacity = '';\n        }\n\n        var nodes = _this.manager.refs[collection];\n\n        for (var i = 0, len = nodes.length; i < len; i++) {\n          var node = nodes[i];\n          var el = node.node; // Clear the cached offsetTop / offsetLeft value\n\n          node.edgeOffset = null; // Remove the transforms / transitions\n\n          el.style[_utils.vendorPrefix + 'Transform'] = '';\n          el.style[_utils.vendorPrefix + 'TransitionDuration'] = '';\n        } // Stop autoscroll\n\n\n        clearInterval(_this.autoscrollInterval);\n        _this.autoscrollInterval = null; // Update state\n\n        _this.manager.active = null;\n\n        _this.setState({\n          sorting: false,\n          sortingIndex: null\n        });\n\n        if (typeof onSortEnd === 'function') {\n          onSortEnd({\n            oldIndex: _this.index,\n            newIndex: _this.newIndex,\n            collection: collection\n          }, e);\n        }\n\n        _this._touched = false;\n      };\n\n      _this.autoscroll = function () {\n        var translate = _this.translate;\n        var direction = {\n          x: 0,\n          y: 0\n        };\n        var speed = {\n          x: 1,\n          y: 1\n        };\n        var acceleration = {\n          x: 10,\n          y: 10\n        };\n\n        if (translate.y >= _this.maxTranslate.y - _this.height / 2) {\n          direction.y = 1; // Scroll Down\n\n          speed.y = acceleration.y * Math.abs((_this.maxTranslate.y - _this.height / 2 - translate.y) / _this.height);\n        } else if (translate.x >= _this.maxTranslate.x - _this.width / 2) {\n          direction.x = 1; // Scroll Right\n\n          speed.x = acceleration.x * Math.abs((_this.maxTranslate.x - _this.width / 2 - translate.x) / _this.width);\n        } else if (translate.y <= _this.minTranslate.y + _this.height / 2) {\n          direction.y = -1; // Scroll Up\n\n          speed.y = acceleration.y * Math.abs((translate.y - _this.height / 2 - _this.minTranslate.y) / _this.height);\n        } else if (translate.x <= _this.minTranslate.x + _this.width / 2) {\n          direction.x = -1; // Scroll Left\n\n          speed.x = acceleration.x * Math.abs((translate.x - _this.width / 2 - _this.minTranslate.x) / _this.width);\n        }\n\n        if (_this.autoscrollInterval) {\n          clearInterval(_this.autoscrollInterval);\n          _this.autoscrollInterval = null;\n          _this.isAutoScrolling = false;\n        }\n\n        if (direction.x !== 0 || direction.y !== 0) {\n          _this.autoscrollInterval = setInterval(function () {\n            _this.isAutoScrolling = true;\n            var offset = {\n              left: 1 * speed.x * direction.x,\n              top: 1 * speed.y * direction.y\n            };\n            _this.scrollContainer.scrollTop += offset.top;\n            _this.scrollContainer.scrollLeft += offset.left;\n            _this.translate.x += offset.left;\n            _this.translate.y += offset.top;\n\n            _this.animateNodes();\n          }, 5);\n        }\n      };\n\n      _this.manager = new _Manager2.default();\n      _this.events = {\n        start: _this.handleStart,\n        move: _this.handleMove,\n        end: _this.handleEnd\n      };\n      (0, _invariant2.default)(!(props.distance && props.pressDelay), 'Attempted to set both `pressDelay` and `distance` on SortableContainer, you may only use one or the other, not both at the same time.');\n      _this.state = {};\n      return _this;\n    }\n\n    _createClass(_class, [{\n      key: 'getChildContext',\n      value: function getChildContext() {\n        return {\n          manager: this.manager\n        };\n      }\n    }, {\n      key: 'componentDidMount',\n      value: function componentDidMount() {\n        var _this2 = this;\n\n        var _props = this.props,\n            getContainer = _props.getContainer,\n            useWindowAsScrollContainer = _props.useWindowAsScrollContainer;\n        /*\n         *  Set our own default rather than using defaultProps because Jest\n         *  snapshots will serialize window, causing a RangeError\n         *  https://github.com/clauderic/react-sortable-hoc/issues/249\n         */\n\n        var contentWindow = this.props.contentWindow || window;\n        this.container = typeof getContainer === 'function' ? getContainer(this.getWrappedInstance()) : (0, _reactDom.findDOMNode)(this);\n        this.document = this.container.ownerDocument || document;\n        this.scrollContainer = useWindowAsScrollContainer ? this.document.body : this.container;\n        this.contentWindow = typeof contentWindow === 'function' ? contentWindow() : contentWindow;\n\n        var _loop = function _loop(key) {\n          if (_this2.events.hasOwnProperty(key)) {\n            _utils.events[key].forEach(function (eventName) {\n              return _this2.container.addEventListener(eventName, _this2.events[key], false);\n            });\n          }\n        };\n\n        for (var key in this.events) {\n          _loop(key);\n        }\n      }\n    }, {\n      key: 'componentWillUnmount',\n      value: function componentWillUnmount() {\n        var _this3 = this;\n\n        var _loop2 = function _loop2(key) {\n          if (_this3.events.hasOwnProperty(key)) {\n            _utils.events[key].forEach(function (eventName) {\n              return _this3.container.removeEventListener(eventName, _this3.events[key]);\n            });\n          }\n        };\n\n        for (var key in this.events) {\n          _loop2(key);\n        }\n      }\n    }, {\n      key: 'getEdgeOffset',\n      value: function getEdgeOffset(node) {\n        var offset = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {\n          top: 0,\n          left: 0\n        }; // Get the actual offsetTop / offsetLeft value, no matter how deep the node is nested\n\n        if (node) {\n          var nodeOffset = {\n            top: offset.top + node.offsetTop,\n            left: offset.left + node.offsetLeft\n          };\n\n          if (node.parentNode !== this.container) {\n            return this.getEdgeOffset(node.parentNode, nodeOffset);\n          } else {\n            return nodeOffset;\n          }\n        }\n      }\n    }, {\n      key: 'getOffset',\n      value: function getOffset(e) {\n        return {\n          x: e.touches ? e.touches[0].pageX : e.pageX,\n          y: e.touches ? e.touches[0].pageY : e.pageY\n        };\n      }\n    }, {\n      key: 'getLockPixelOffsets',\n      value: function getLockPixelOffsets() {\n        var lockOffset = this.props.lockOffset;\n\n        if (!Array.isArray(lockOffset)) {\n          lockOffset = [lockOffset, lockOffset];\n        }\n\n        (0, _invariant2.default)(lockOffset.length === 2, 'lockOffset prop of SortableContainer should be a single ' + 'value or an array of exactly two values. Given %s', lockOffset);\n\n        var _lockOffset = lockOffset,\n            _lockOffset2 = _slicedToArray(_lockOffset, 2),\n            minLockOffset = _lockOffset2[0],\n            maxLockOffset = _lockOffset2[1];\n\n        return [this.getLockPixelOffset(minLockOffset), this.getLockPixelOffset(maxLockOffset)];\n      }\n    }, {\n      key: 'getLockPixelOffset',\n      value: function getLockPixelOffset(lockOffset) {\n        var offsetX = lockOffset;\n        var offsetY = lockOffset;\n        var unit = 'px';\n\n        if (typeof lockOffset === 'string') {\n          var match = /^[+-]?\\d*(?:\\.\\d*)?(px|%)$/.exec(lockOffset);\n          (0, _invariant2.default)(match !== null, 'lockOffset value should be a number or a string of a ' + 'number followed by \"px\" or \"%\". Given %s', lockOffset);\n          offsetX = offsetY = parseFloat(lockOffset);\n          unit = match[1];\n        }\n\n        (0, _invariant2.default)(isFinite(offsetX) && isFinite(offsetY), 'lockOffset value should be a finite. Given %s', lockOffset);\n\n        if (unit === '%') {\n          offsetX = offsetX * this.width / 100;\n          offsetY = offsetY * this.height / 100;\n        }\n\n        return {\n          x: offsetX,\n          y: offsetY\n        };\n      }\n    }, {\n      key: 'updatePosition',\n      value: function updatePosition(e) {\n        var _props2 = this.props,\n            lockAxis = _props2.lockAxis,\n            lockToContainerEdges = _props2.lockToContainerEdges;\n        var offset = this.getOffset(e);\n        var translate = {\n          x: offset.x - this.initialOffset.x,\n          y: offset.y - this.initialOffset.y\n        }; // Adjust for window scroll\n\n        translate.y -= window.pageYOffset - this.initialWindowScroll.top;\n        translate.x -= window.pageXOffset - this.initialWindowScroll.left;\n        this.translate = translate;\n\n        if (lockToContainerEdges) {\n          var _getLockPixelOffsets = this.getLockPixelOffsets(),\n              _getLockPixelOffsets2 = _slicedToArray(_getLockPixelOffsets, 2),\n              minLockOffset = _getLockPixelOffsets2[0],\n              maxLockOffset = _getLockPixelOffsets2[1];\n\n          var minOffset = {\n            x: this.width / 2 - minLockOffset.x,\n            y: this.height / 2 - minLockOffset.y\n          };\n          var maxOffset = {\n            x: this.width / 2 - maxLockOffset.x,\n            y: this.height / 2 - maxLockOffset.y\n          };\n          translate.x = (0, _utils.limit)(this.minTranslate.x + minOffset.x, this.maxTranslate.x - maxOffset.x, translate.x);\n          translate.y = (0, _utils.limit)(this.minTranslate.y + minOffset.y, this.maxTranslate.y - maxOffset.y, translate.y);\n        }\n\n        if (lockAxis === 'x') {\n          translate.y = 0;\n        } else if (lockAxis === 'y') {\n          translate.x = 0;\n        }\n\n        this.helper.style[_utils.vendorPrefix + 'Transform'] = 'translate3d(' + translate.x + 'px,' + translate.y + 'px, 0)';\n      }\n    }, {\n      key: 'animateNodes',\n      value: function animateNodes() {\n        var _props3 = this.props,\n            transitionDuration = _props3.transitionDuration,\n            hideSortableGhost = _props3.hideSortableGhost;\n        var nodes = this.manager.getOrderedRefs();\n        var deltaScroll = {\n          left: this.scrollContainer.scrollLeft - this.initialScroll.left,\n          top: this.scrollContainer.scrollTop - this.initialScroll.top\n        };\n        var sortingOffset = {\n          left: this.offsetEdge.left + this.translate.x + deltaScroll.left,\n          top: this.offsetEdge.top + this.translate.y + deltaScroll.top\n        };\n        var scrollDifference = {\n          top: window.pageYOffset - this.initialWindowScroll.top,\n          left: window.pageXOffset - this.initialWindowScroll.left\n        };\n        this.newIndex = null;\n\n        for (var i = 0, len = nodes.length; i < len; i++) {\n          var node = nodes[i].node;\n          var index = node.sortableInfo.index;\n          var width = node.offsetWidth;\n          var height = node.offsetHeight;\n          var offset = {\n            width: this.width > width ? width / 2 : this.width / 2,\n            height: this.height > height ? height / 2 : this.height / 2\n          };\n          var translate = {\n            x: 0,\n            y: 0\n          };\n          var edgeOffset = nodes[i].edgeOffset; // If we haven't cached the node's offsetTop / offsetLeft value\n\n          if (!edgeOffset) {\n            nodes[i].edgeOffset = edgeOffset = this.getEdgeOffset(node);\n          } // Get a reference to the next and previous node\n\n\n          var nextNode = i < nodes.length - 1 && nodes[i + 1];\n          var prevNode = i > 0 && nodes[i - 1]; // Also cache the next node's edge offset if needed.\n          // We need this for calculating the animation in a grid setup\n\n          if (nextNode && !nextNode.edgeOffset) {\n            nextNode.edgeOffset = this.getEdgeOffset(nextNode.node);\n          } // If the node is the one we're currently animating, skip it\n\n\n          if (index === this.index) {\n            if (hideSortableGhost) {\n              /*\n              * With windowing libraries such as `react-virtualized`, the sortableGhost\n              * node may change while scrolling down and then back up (or vice-versa),\n              * so we need to update the reference to the new node just to be safe.\n              */\n              this.sortableGhost = node;\n              node.style.visibility = 'hidden';\n              node.style.opacity = 0;\n            }\n\n            continue;\n          }\n\n          if (transitionDuration) {\n            node.style[_utils.vendorPrefix + 'TransitionDuration'] = transitionDuration + 'ms';\n          }\n\n          if (this.axis.x) {\n            if (this.axis.y) {\n              // Calculations for a grid setup\n              if (index < this.index && (sortingOffset.left + scrollDifference.left - offset.width <= edgeOffset.left && sortingOffset.top + scrollDifference.top <= edgeOffset.top + offset.height || sortingOffset.top + scrollDifference.top + offset.height <= edgeOffset.top)) {\n                // If the current node is to the left on the same row, or above the node that's being dragged\n                // then move it to the right\n                translate.x = this.width + this.marginOffset.x;\n\n                if (edgeOffset.left + translate.x > this.containerBoundingRect.width - offset.width) {\n                  // If it moves passed the right bounds, then animate it to the first position of the next row.\n                  // We just use the offset of the next node to calculate where to move, because that node's original position\n                  // is exactly where we want to go\n                  translate.x = nextNode.edgeOffset.left - edgeOffset.left;\n                  translate.y = nextNode.edgeOffset.top - edgeOffset.top;\n                }\n\n                if (this.newIndex === null) {\n                  this.newIndex = index;\n                }\n              } else if (index > this.index && (sortingOffset.left + scrollDifference.left + offset.width >= edgeOffset.left && sortingOffset.top + scrollDifference.top + offset.height >= edgeOffset.top || sortingOffset.top + scrollDifference.top + offset.height >= edgeOffset.top + height)) {\n                // If the current node is to the right on the same row, or below the node that's being dragged\n                // then move it to the left\n                translate.x = -(this.width + this.marginOffset.x);\n\n                if (edgeOffset.left + translate.x < this.containerBoundingRect.left + offset.width) {\n                  // If it moves passed the left bounds, then animate it to the last position of the previous row.\n                  // We just use the offset of the previous node to calculate where to move, because that node's original position\n                  // is exactly where we want to go\n                  translate.x = prevNode.edgeOffset.left - edgeOffset.left;\n                  translate.y = prevNode.edgeOffset.top - edgeOffset.top;\n                }\n\n                this.newIndex = index;\n              }\n            } else {\n              if (index > this.index && sortingOffset.left + scrollDifference.left + offset.width >= edgeOffset.left) {\n                translate.x = -(this.width + this.marginOffset.x);\n                this.newIndex = index;\n              } else if (index < this.index && sortingOffset.left + scrollDifference.left <= edgeOffset.left + offset.width) {\n                translate.x = this.width + this.marginOffset.x;\n\n                if (this.newIndex == null) {\n                  this.newIndex = index;\n                }\n              }\n            }\n          } else if (this.axis.y) {\n            if (index > this.index && sortingOffset.top + scrollDifference.top + offset.height >= edgeOffset.top) {\n              translate.y = -(this.height + this.marginOffset.y);\n              this.newIndex = index;\n            } else if (index < this.index && sortingOffset.top + scrollDifference.top <= edgeOffset.top + offset.height) {\n              translate.y = this.height + this.marginOffset.y;\n\n              if (this.newIndex == null) {\n                this.newIndex = index;\n              }\n            }\n          }\n\n          node.style[_utils.vendorPrefix + 'Transform'] = 'translate3d(' + translate.x + 'px,' + translate.y + 'px,0)';\n        }\n\n        if (this.newIndex == null) {\n          this.newIndex = this.index;\n        }\n      }\n    }, {\n      key: 'getWrappedInstance',\n      value: function getWrappedInstance() {\n        (0, _invariant2.default)(config.withRef, 'To access the wrapped instance, you need to pass in {withRef: true} as the second argument of the SortableContainer() call');\n        return this.refs.wrappedInstance;\n      }\n    }, {\n      key: 'render',\n      value: function render() {\n        var ref = config.withRef ? 'wrappedInstance' : null;\n        return _react2.default.createElement(WrappedComponent, _extends({\n          ref: ref\n        }, (0, _utils.omit)(this.props, 'contentWindow', 'useWindowAsScrollContainer', 'distance', 'helperClass', 'hideSortableGhost', 'transitionDuration', 'useDragHandle', 'pressDelay', 'pressThreshold', 'shouldCancelStart', 'onSortStart', 'onSortMove', 'onSortEnd', 'axis', 'lockAxis', 'lockOffset', 'lockToContainerEdges', 'getContainer', 'getHelperDimensions')));\n      }\n    }]);\n\n    return _class;\n  }(_react.Component), _class.displayName = (0, _utils.provideDisplayName)('sortableList', WrappedComponent), _class.defaultProps = {\n    axis: 'y',\n    transitionDuration: 300,\n    pressDelay: 0,\n    pressThreshold: 5,\n    distance: 0,\n    useWindowAsScrollContainer: false,\n    hideSortableGhost: true,\n    shouldCancelStart: function shouldCancelStart(e) {\n      // Cancel sorting if the event target is an `input`, `textarea`, `select` or `option`\n      var disabledElements = ['input', 'textarea', 'select', 'option', 'button'];\n\n      if (disabledElements.indexOf(e.target.tagName.toLowerCase()) !== -1) {\n        return true; // Return true to cancel sorting\n      }\n    },\n    lockToContainerEdges: false,\n    lockOffset: '50%',\n    getHelperDimensions: function getHelperDimensions(_ref) {\n      var node = _ref.node;\n      return {\n        width: node.offsetWidth,\n        height: node.offsetHeight\n      };\n    }\n  }, _class.propTypes = {\n    axis: _propTypes2.default.oneOf(['x', 'y', 'xy']),\n    distance: _propTypes2.default.number,\n    lockAxis: _propTypes2.default.string,\n    helperClass: _propTypes2.default.string,\n    transitionDuration: _propTypes2.default.number,\n    contentWindow: _propTypes2.default.any,\n    onSortStart: _propTypes2.default.func,\n    onSortMove: _propTypes2.default.func,\n    onSortEnd: _propTypes2.default.func,\n    shouldCancelStart: _propTypes2.default.func,\n    pressDelay: _propTypes2.default.number,\n    useDragHandle: _propTypes2.default.bool,\n    useWindowAsScrollContainer: _propTypes2.default.bool,\n    hideSortableGhost: _propTypes2.default.bool,\n    lockToContainerEdges: _propTypes2.default.bool,\n    lockOffset: _propTypes2.default.oneOfType([_propTypes2.default.number, _propTypes2.default.string, _propTypes2.default.arrayOf(_propTypes2.default.oneOfType([_propTypes2.default.number, _propTypes2.default.string]))]),\n    getContainer: _propTypes2.default.func,\n    getHelperDimensions: _propTypes2.default.func\n  }, _class.childContextTypes = {\n    manager: _propTypes2.default.object.isRequired\n  }, _temp;\n}","map":{"version":3,"sources":["/Users/othome/Desktop/projects/zonar/zpeek/node_modules/react-sortable-hoc/dist/commonjs/SortableContainer/index.js"],"names":["Object","defineProperty","exports","value","_extends","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","_slicedToArray","sliceIterator","arr","_arr","_n","_d","_e","undefined","_i","Symbol","iterator","_s","next","done","push","err","Array","isArray","TypeError","_createClass","defineProperties","props","descriptor","enumerable","configurable","writable","Constructor","protoProps","staticProps","default","sortableContainer","_react","require","_react2","_interopRequireDefault","_propTypes","_propTypes2","_reactDom","_invariant","_invariant2","_Manager","_Manager2","_utils","obj","__esModule","_toConsumableArray","arr2","from","_classCallCheck","instance","_possibleConstructorReturn","self","ReferenceError","_inherits","subClass","superClass","create","constructor","setPrototypeOf","__proto__","WrappedComponent","_class","_temp","config","withRef","_Component","_this","getPrototypeOf","handleStart","e","_this$props","distance","shouldCancelStart","button","_touched","_pos","x","pageX","y","pageY","node","closest","el","sortableInfo","nodeIsChild","state","sorting","useDragHandle","_node$sortableInfo","index","collection","sortableHandle","manager","active","tagName","toLowerCase","preventDefault","pressDelay","handlePress","pressTimer","setTimeout","handleMove","_this$props2","pressThreshold","_delta","delta","Math","abs","clearTimeout","cancelTimer","cancel","isActive","handleEnd","getActive","_this$props3","axis","getHelperDimensions","helperClass","hideSortableGhost","onSortStart","useWindowAsScrollContainer","margin","getElementMargin","containerBoundingRect","container","getBoundingClientRect","dimensions","width","height","marginOffset","left","right","max","top","bottom","boundingClientRect","newIndex","indexOf","offsetEdge","getEdgeOffset","initialOffset","getOffset","initialScroll","scrollContainer","scrollTop","scrollLeft","initialWindowScroll","window","pageYOffset","pageXOffset","fields","querySelectorAll","clonedNode","cloneNode","clonedFields","concat","forEach","field","type","helper","document","body","appendChild","style","position","boxSizing","pointerEvents","sortableGhost","visibility","opacity","minTranslate","maxTranslate","contentWindow","innerWidth","innerHeight","_this$helper$classLis","classList","add","apply","split","listenerNode","touches","events","move","eventName","addEventListener","handleSortMove","end","handleSortEnd","setState","sortingIndex","onSortMove","updatePosition","animateNodes","autoscroll","_this$props4","onSortEnd","removeEventListener","parentNode","removeChild","nodes","refs","len","edgeOffset","vendorPrefix","clearInterval","autoscrollInterval","oldIndex","translate","direction","speed","acceleration","isAutoScrolling","setInterval","offset","start","getChildContext","componentDidMount","_this2","_props","getContainer","getWrappedInstance","findDOMNode","ownerDocument","_loop","componentWillUnmount","_this3","_loop2","nodeOffset","offsetTop","offsetLeft","getLockPixelOffsets","lockOffset","_lockOffset","_lockOffset2","minLockOffset","maxLockOffset","getLockPixelOffset","offsetX","offsetY","unit","match","exec","parseFloat","isFinite","_props2","lockAxis","lockToContainerEdges","_getLockPixelOffsets","_getLockPixelOffsets2","minOffset","maxOffset","limit","_props3","transitionDuration","getOrderedRefs","deltaScroll","sortingOffset","scrollDifference","offsetWidth","offsetHeight","nextNode","prevNode","wrappedInstance","render","ref","createElement","omit","Component","displayName","provideDisplayName","defaultProps","disabledElements","_ref","propTypes","oneOf","number","string","any","func","bool","oneOfType","arrayOf","childContextTypes","object","isRequired"],"mappings":"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","sourcesContent":["'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nexports.default = sortableContainer;\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = require('prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _reactDom = require('react-dom');\n\nvar _invariant = require('invariant');\n\nvar _invariant2 = _interopRequireDefault(_invariant);\n\nvar _Manager = require('../Manager');\n\nvar _Manager2 = _interopRequireDefault(_Manager);\n\nvar _utils = require('../utils');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n// Export Higher Order Sortable Container Component\nfunction sortableContainer(WrappedComponent) {\n  var _class, _temp;\n\n  var config = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : { withRef: false };\n\n  return _temp = _class = function (_Component) {\n    _inherits(_class, _Component);\n\n    function _class(props) {\n      _classCallCheck(this, _class);\n\n      var _this = _possibleConstructorReturn(this, (_class.__proto__ || Object.getPrototypeOf(_class)).call(this, props));\n\n      _this.handleStart = function (e) {\n        var _this$props = _this.props,\n            distance = _this$props.distance,\n            shouldCancelStart = _this$props.shouldCancelStart;\n\n\n        if (e.button === 2 || shouldCancelStart(e)) {\n          return false;\n        }\n\n        _this._touched = true;\n        _this._pos = {\n          x: e.pageX,\n          y: e.pageY\n        };\n\n        var node = (0, _utils.closest)(e.target, function (el) {\n          return el.sortableInfo != null;\n        });\n\n        if (node && node.sortableInfo && _this.nodeIsChild(node) && !_this.state.sorting) {\n          var useDragHandle = _this.props.useDragHandle;\n          var _node$sortableInfo = node.sortableInfo,\n              index = _node$sortableInfo.index,\n              collection = _node$sortableInfo.collection;\n\n\n          if (useDragHandle && !(0, _utils.closest)(e.target, function (el) {\n            return el.sortableHandle != null;\n          })) return;\n\n          _this.manager.active = { index: index, collection: collection };\n\n          /*\n          * Fixes a bug in Firefox where the :active state of anchor tags\n          * prevent subsequent 'mousemove' events from being fired\n          * (see https://github.com/clauderic/react-sortable-hoc/issues/118)\n          */\n          if (e.target.tagName.toLowerCase() === 'a') {\n            e.preventDefault();\n          }\n\n          if (!distance) {\n            if (_this.props.pressDelay === 0) {\n              _this.handlePress(e);\n            } else {\n              _this.pressTimer = setTimeout(function () {\n                return _this.handlePress(e);\n              }, _this.props.pressDelay);\n            }\n          }\n        }\n      };\n\n      _this.nodeIsChild = function (node) {\n        return node.sortableInfo.manager === _this.manager;\n      };\n\n      _this.handleMove = function (e) {\n        var _this$props2 = _this.props,\n            distance = _this$props2.distance,\n            pressThreshold = _this$props2.pressThreshold;\n\n\n        if (!_this.state.sorting && _this._touched) {\n          _this._delta = {\n            x: _this._pos.x - e.pageX,\n            y: _this._pos.y - e.pageY\n          };\n          var delta = Math.abs(_this._delta.x) + Math.abs(_this._delta.y);\n\n          if (!distance && (!pressThreshold || pressThreshold && delta >= pressThreshold)) {\n            clearTimeout(_this.cancelTimer);\n            _this.cancelTimer = setTimeout(_this.cancel, 0);\n          } else if (distance && delta >= distance && _this.manager.isActive()) {\n            _this.handlePress(e);\n          }\n        }\n      };\n\n      _this.handleEnd = function () {\n        var distance = _this.props.distance;\n\n\n        _this._touched = false;\n\n        if (!distance) {\n          _this.cancel();\n        }\n      };\n\n      _this.cancel = function () {\n        if (!_this.state.sorting) {\n          clearTimeout(_this.pressTimer);\n          _this.manager.active = null;\n        }\n      };\n\n      _this.handlePress = function (e) {\n        var active = _this.manager.getActive();\n\n        if (active) {\n          var _this$props3 = _this.props,\n              axis = _this$props3.axis,\n              getHelperDimensions = _this$props3.getHelperDimensions,\n              helperClass = _this$props3.helperClass,\n              hideSortableGhost = _this$props3.hideSortableGhost,\n              onSortStart = _this$props3.onSortStart,\n              useWindowAsScrollContainer = _this$props3.useWindowAsScrollContainer;\n          var node = active.node,\n              collection = active.collection;\n          var index = node.sortableInfo.index;\n\n          var margin = (0, _utils.getElementMargin)(node);\n\n          var containerBoundingRect = _this.container.getBoundingClientRect();\n          var dimensions = getHelperDimensions({ index: index, node: node, collection: collection });\n\n          _this.node = node;\n          _this.margin = margin;\n          _this.width = dimensions.width;\n          _this.height = dimensions.height;\n          _this.marginOffset = {\n            x: _this.margin.left + _this.margin.right,\n            y: Math.max(_this.margin.top, _this.margin.bottom)\n          };\n          _this.boundingClientRect = node.getBoundingClientRect();\n          _this.containerBoundingRect = containerBoundingRect;\n          _this.index = index;\n          _this.newIndex = index;\n\n          _this.axis = {\n            x: axis.indexOf('x') >= 0,\n            y: axis.indexOf('y') >= 0\n          };\n          _this.offsetEdge = _this.getEdgeOffset(node);\n          _this.initialOffset = _this.getOffset(e);\n          _this.initialScroll = {\n            top: _this.scrollContainer.scrollTop,\n            left: _this.scrollContainer.scrollLeft\n          };\n\n          _this.initialWindowScroll = {\n            top: window.pageYOffset,\n            left: window.pageXOffset\n          };\n\n          var fields = node.querySelectorAll('input, textarea, select');\n          var clonedNode = node.cloneNode(true);\n          var clonedFields = [].concat(_toConsumableArray(clonedNode.querySelectorAll('input, textarea, select'))); // Convert NodeList to Array\n\n          clonedFields.forEach(function (field, index) {\n            if (field.type !== 'file' && fields[index]) {\n              field.value = fields[index].value;\n            }\n          });\n\n          _this.helper = _this.document.body.appendChild(clonedNode);\n\n          _this.helper.style.position = 'fixed';\n          _this.helper.style.top = _this.boundingClientRect.top - margin.top + 'px';\n          _this.helper.style.left = _this.boundingClientRect.left - margin.left + 'px';\n          _this.helper.style.width = _this.width + 'px';\n          _this.helper.style.height = _this.height + 'px';\n          _this.helper.style.boxSizing = 'border-box';\n          _this.helper.style.pointerEvents = 'none';\n\n          if (hideSortableGhost) {\n            _this.sortableGhost = node;\n            node.style.visibility = 'hidden';\n            node.style.opacity = 0;\n          }\n\n          _this.minTranslate = {};\n          _this.maxTranslate = {};\n          if (_this.axis.x) {\n            _this.minTranslate.x = (useWindowAsScrollContainer ? 0 : containerBoundingRect.left) - _this.boundingClientRect.left - _this.width / 2;\n            _this.maxTranslate.x = (useWindowAsScrollContainer ? _this.contentWindow.innerWidth : containerBoundingRect.left + containerBoundingRect.width) - _this.boundingClientRect.left - _this.width / 2;\n          }\n          if (_this.axis.y) {\n            _this.minTranslate.y = (useWindowAsScrollContainer ? 0 : containerBoundingRect.top) - _this.boundingClientRect.top - _this.height / 2;\n            _this.maxTranslate.y = (useWindowAsScrollContainer ? _this.contentWindow.innerHeight : containerBoundingRect.top + containerBoundingRect.height) - _this.boundingClientRect.top - _this.height / 2;\n          }\n\n          if (helperClass) {\n            var _this$helper$classLis;\n\n            (_this$helper$classLis = _this.helper.classList).add.apply(_this$helper$classLis, _toConsumableArray(helperClass.split(' ')));\n          }\n\n          _this.listenerNode = e.touches ? node : _this.contentWindow;\n          _utils.events.move.forEach(function (eventName) {\n            return _this.listenerNode.addEventListener(eventName, _this.handleSortMove, false);\n          });\n          _utils.events.end.forEach(function (eventName) {\n            return _this.listenerNode.addEventListener(eventName, _this.handleSortEnd, false);\n          });\n\n          _this.setState({\n            sorting: true,\n            sortingIndex: index\n          });\n\n          if (onSortStart) onSortStart({ node: node, index: index, collection: collection }, e);\n        }\n      };\n\n      _this.handleSortMove = function (e) {\n        var onSortMove = _this.props.onSortMove;\n\n        e.preventDefault(); // Prevent scrolling on mobile\n\n        _this.updatePosition(e);\n        _this.animateNodes();\n        _this.autoscroll();\n\n        if (onSortMove) onSortMove(e);\n      };\n\n      _this.handleSortEnd = function (e) {\n        var _this$props4 = _this.props,\n            hideSortableGhost = _this$props4.hideSortableGhost,\n            onSortEnd = _this$props4.onSortEnd;\n        var collection = _this.manager.active.collection;\n\n        // Remove the event listeners if the node is still in the DOM\n\n        if (_this.listenerNode) {\n          _utils.events.move.forEach(function (eventName) {\n            return _this.listenerNode.removeEventListener(eventName, _this.handleSortMove);\n          });\n          _utils.events.end.forEach(function (eventName) {\n            return _this.listenerNode.removeEventListener(eventName, _this.handleSortEnd);\n          });\n        }\n\n        // Remove the helper from the DOM\n        _this.helper.parentNode.removeChild(_this.helper);\n\n        if (hideSortableGhost && _this.sortableGhost) {\n          _this.sortableGhost.style.visibility = '';\n          _this.sortableGhost.style.opacity = '';\n        }\n\n        var nodes = _this.manager.refs[collection];\n        for (var i = 0, len = nodes.length; i < len; i++) {\n          var node = nodes[i];\n          var el = node.node;\n\n          // Clear the cached offsetTop / offsetLeft value\n          node.edgeOffset = null;\n\n          // Remove the transforms / transitions\n          el.style[_utils.vendorPrefix + 'Transform'] = '';\n          el.style[_utils.vendorPrefix + 'TransitionDuration'] = '';\n        }\n\n        // Stop autoscroll\n        clearInterval(_this.autoscrollInterval);\n        _this.autoscrollInterval = null;\n\n        // Update state\n        _this.manager.active = null;\n\n        _this.setState({\n          sorting: false,\n          sortingIndex: null\n        });\n\n        if (typeof onSortEnd === 'function') {\n          onSortEnd({\n            oldIndex: _this.index,\n            newIndex: _this.newIndex,\n            collection: collection\n          }, e);\n        }\n\n        _this._touched = false;\n      };\n\n      _this.autoscroll = function () {\n        var translate = _this.translate;\n        var direction = {\n          x: 0,\n          y: 0\n        };\n        var speed = {\n          x: 1,\n          y: 1\n        };\n        var acceleration = {\n          x: 10,\n          y: 10\n        };\n\n        if (translate.y >= _this.maxTranslate.y - _this.height / 2) {\n          direction.y = 1; // Scroll Down\n          speed.y = acceleration.y * Math.abs((_this.maxTranslate.y - _this.height / 2 - translate.y) / _this.height);\n        } else if (translate.x >= _this.maxTranslate.x - _this.width / 2) {\n          direction.x = 1; // Scroll Right\n          speed.x = acceleration.x * Math.abs((_this.maxTranslate.x - _this.width / 2 - translate.x) / _this.width);\n        } else if (translate.y <= _this.minTranslate.y + _this.height / 2) {\n          direction.y = -1; // Scroll Up\n          speed.y = acceleration.y * Math.abs((translate.y - _this.height / 2 - _this.minTranslate.y) / _this.height);\n        } else if (translate.x <= _this.minTranslate.x + _this.width / 2) {\n          direction.x = -1; // Scroll Left\n          speed.x = acceleration.x * Math.abs((translate.x - _this.width / 2 - _this.minTranslate.x) / _this.width);\n        }\n\n        if (_this.autoscrollInterval) {\n          clearInterval(_this.autoscrollInterval);\n          _this.autoscrollInterval = null;\n          _this.isAutoScrolling = false;\n        }\n\n        if (direction.x !== 0 || direction.y !== 0) {\n          _this.autoscrollInterval = setInterval(function () {\n            _this.isAutoScrolling = true;\n            var offset = {\n              left: 1 * speed.x * direction.x,\n              top: 1 * speed.y * direction.y\n            };\n            _this.scrollContainer.scrollTop += offset.top;\n            _this.scrollContainer.scrollLeft += offset.left;\n            _this.translate.x += offset.left;\n            _this.translate.y += offset.top;\n            _this.animateNodes();\n          }, 5);\n        }\n      };\n\n      _this.manager = new _Manager2.default();\n      _this.events = {\n        start: _this.handleStart,\n        move: _this.handleMove,\n        end: _this.handleEnd\n      };\n\n      (0, _invariant2.default)(!(props.distance && props.pressDelay), 'Attempted to set both `pressDelay` and `distance` on SortableContainer, you may only use one or the other, not both at the same time.');\n\n      _this.state = {};\n      return _this;\n    }\n\n    _createClass(_class, [{\n      key: 'getChildContext',\n      value: function getChildContext() {\n        return {\n          manager: this.manager\n        };\n      }\n    }, {\n      key: 'componentDidMount',\n      value: function componentDidMount() {\n        var _this2 = this;\n\n        var _props = this.props,\n            getContainer = _props.getContainer,\n            useWindowAsScrollContainer = _props.useWindowAsScrollContainer;\n\n        /*\n         *  Set our own default rather than using defaultProps because Jest\n         *  snapshots will serialize window, causing a RangeError\n         *  https://github.com/clauderic/react-sortable-hoc/issues/249\n         */\n\n        var contentWindow = this.props.contentWindow || window;\n\n        this.container = typeof getContainer === 'function' ? getContainer(this.getWrappedInstance()) : (0, _reactDom.findDOMNode)(this);\n        this.document = this.container.ownerDocument || document;\n        this.scrollContainer = useWindowAsScrollContainer ? this.document.body : this.container;\n        this.contentWindow = typeof contentWindow === 'function' ? contentWindow() : contentWindow;\n\n        var _loop = function _loop(key) {\n          if (_this2.events.hasOwnProperty(key)) {\n            _utils.events[key].forEach(function (eventName) {\n              return _this2.container.addEventListener(eventName, _this2.events[key], false);\n            });\n          }\n        };\n\n        for (var key in this.events) {\n          _loop(key);\n        }\n      }\n    }, {\n      key: 'componentWillUnmount',\n      value: function componentWillUnmount() {\n        var _this3 = this;\n\n        var _loop2 = function _loop2(key) {\n          if (_this3.events.hasOwnProperty(key)) {\n            _utils.events[key].forEach(function (eventName) {\n              return _this3.container.removeEventListener(eventName, _this3.events[key]);\n            });\n          }\n        };\n\n        for (var key in this.events) {\n          _loop2(key);\n        }\n      }\n    }, {\n      key: 'getEdgeOffset',\n      value: function getEdgeOffset(node) {\n        var offset = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : { top: 0, left: 0 };\n\n        // Get the actual offsetTop / offsetLeft value, no matter how deep the node is nested\n        if (node) {\n          var nodeOffset = {\n            top: offset.top + node.offsetTop,\n            left: offset.left + node.offsetLeft\n          };\n          if (node.parentNode !== this.container) {\n            return this.getEdgeOffset(node.parentNode, nodeOffset);\n          } else {\n            return nodeOffset;\n          }\n        }\n      }\n    }, {\n      key: 'getOffset',\n      value: function getOffset(e) {\n        return {\n          x: e.touches ? e.touches[0].pageX : e.pageX,\n          y: e.touches ? e.touches[0].pageY : e.pageY\n        };\n      }\n    }, {\n      key: 'getLockPixelOffsets',\n      value: function getLockPixelOffsets() {\n        var lockOffset = this.props.lockOffset;\n\n\n        if (!Array.isArray(lockOffset)) {\n          lockOffset = [lockOffset, lockOffset];\n        }\n\n        (0, _invariant2.default)(lockOffset.length === 2, 'lockOffset prop of SortableContainer should be a single ' + 'value or an array of exactly two values. Given %s', lockOffset);\n\n        var _lockOffset = lockOffset,\n            _lockOffset2 = _slicedToArray(_lockOffset, 2),\n            minLockOffset = _lockOffset2[0],\n            maxLockOffset = _lockOffset2[1];\n\n        return [this.getLockPixelOffset(minLockOffset), this.getLockPixelOffset(maxLockOffset)];\n      }\n    }, {\n      key: 'getLockPixelOffset',\n      value: function getLockPixelOffset(lockOffset) {\n        var offsetX = lockOffset;\n        var offsetY = lockOffset;\n        var unit = 'px';\n\n        if (typeof lockOffset === 'string') {\n          var match = /^[+-]?\\d*(?:\\.\\d*)?(px|%)$/.exec(lockOffset);\n\n          (0, _invariant2.default)(match !== null, 'lockOffset value should be a number or a string of a ' + 'number followed by \"px\" or \"%\". Given %s', lockOffset);\n\n          offsetX = offsetY = parseFloat(lockOffset);\n          unit = match[1];\n        }\n\n        (0, _invariant2.default)(isFinite(offsetX) && isFinite(offsetY), 'lockOffset value should be a finite. Given %s', lockOffset);\n\n        if (unit === '%') {\n          offsetX = offsetX * this.width / 100;\n          offsetY = offsetY * this.height / 100;\n        }\n\n        return {\n          x: offsetX,\n          y: offsetY\n        };\n      }\n    }, {\n      key: 'updatePosition',\n      value: function updatePosition(e) {\n        var _props2 = this.props,\n            lockAxis = _props2.lockAxis,\n            lockToContainerEdges = _props2.lockToContainerEdges;\n\n\n        var offset = this.getOffset(e);\n        var translate = {\n          x: offset.x - this.initialOffset.x,\n          y: offset.y - this.initialOffset.y\n        };\n        // Adjust for window scroll\n        translate.y -= window.pageYOffset - this.initialWindowScroll.top;\n        translate.x -= window.pageXOffset - this.initialWindowScroll.left;\n\n        this.translate = translate;\n\n        if (lockToContainerEdges) {\n          var _getLockPixelOffsets = this.getLockPixelOffsets(),\n              _getLockPixelOffsets2 = _slicedToArray(_getLockPixelOffsets, 2),\n              minLockOffset = _getLockPixelOffsets2[0],\n              maxLockOffset = _getLockPixelOffsets2[1];\n\n          var minOffset = {\n            x: this.width / 2 - minLockOffset.x,\n            y: this.height / 2 - minLockOffset.y\n          };\n          var maxOffset = {\n            x: this.width / 2 - maxLockOffset.x,\n            y: this.height / 2 - maxLockOffset.y\n          };\n\n          translate.x = (0, _utils.limit)(this.minTranslate.x + minOffset.x, this.maxTranslate.x - maxOffset.x, translate.x);\n          translate.y = (0, _utils.limit)(this.minTranslate.y + minOffset.y, this.maxTranslate.y - maxOffset.y, translate.y);\n        }\n\n        if (lockAxis === 'x') {\n          translate.y = 0;\n        } else if (lockAxis === 'y') {\n          translate.x = 0;\n        }\n\n        this.helper.style[_utils.vendorPrefix + 'Transform'] = 'translate3d(' + translate.x + 'px,' + translate.y + 'px, 0)';\n      }\n    }, {\n      key: 'animateNodes',\n      value: function animateNodes() {\n        var _props3 = this.props,\n            transitionDuration = _props3.transitionDuration,\n            hideSortableGhost = _props3.hideSortableGhost;\n\n        var nodes = this.manager.getOrderedRefs();\n        var deltaScroll = {\n          left: this.scrollContainer.scrollLeft - this.initialScroll.left,\n          top: this.scrollContainer.scrollTop - this.initialScroll.top\n        };\n        var sortingOffset = {\n          left: this.offsetEdge.left + this.translate.x + deltaScroll.left,\n          top: this.offsetEdge.top + this.translate.y + deltaScroll.top\n        };\n        var scrollDifference = {\n          top: window.pageYOffset - this.initialWindowScroll.top,\n          left: window.pageXOffset - this.initialWindowScroll.left\n        };\n        this.newIndex = null;\n\n        for (var i = 0, len = nodes.length; i < len; i++) {\n          var node = nodes[i].node;\n\n          var index = node.sortableInfo.index;\n          var width = node.offsetWidth;\n          var height = node.offsetHeight;\n          var offset = {\n            width: this.width > width ? width / 2 : this.width / 2,\n            height: this.height > height ? height / 2 : this.height / 2\n          };\n\n          var translate = {\n            x: 0,\n            y: 0\n          };\n          var edgeOffset = nodes[i].edgeOffset;\n\n          // If we haven't cached the node's offsetTop / offsetLeft value\n\n          if (!edgeOffset) {\n            nodes[i].edgeOffset = edgeOffset = this.getEdgeOffset(node);\n          }\n\n          // Get a reference to the next and previous node\n          var nextNode = i < nodes.length - 1 && nodes[i + 1];\n          var prevNode = i > 0 && nodes[i - 1];\n\n          // Also cache the next node's edge offset if needed.\n          // We need this for calculating the animation in a grid setup\n          if (nextNode && !nextNode.edgeOffset) {\n            nextNode.edgeOffset = this.getEdgeOffset(nextNode.node);\n          }\n\n          // If the node is the one we're currently animating, skip it\n          if (index === this.index) {\n            if (hideSortableGhost) {\n              /*\n              * With windowing libraries such as `react-virtualized`, the sortableGhost\n              * node may change while scrolling down and then back up (or vice-versa),\n              * so we need to update the reference to the new node just to be safe.\n              */\n              this.sortableGhost = node;\n              node.style.visibility = 'hidden';\n              node.style.opacity = 0;\n            }\n            continue;\n          }\n\n          if (transitionDuration) {\n            node.style[_utils.vendorPrefix + 'TransitionDuration'] = transitionDuration + 'ms';\n          }\n\n          if (this.axis.x) {\n            if (this.axis.y) {\n              // Calculations for a grid setup\n              if (index < this.index && (sortingOffset.left + scrollDifference.left - offset.width <= edgeOffset.left && sortingOffset.top + scrollDifference.top <= edgeOffset.top + offset.height || sortingOffset.top + scrollDifference.top + offset.height <= edgeOffset.top)) {\n                // If the current node is to the left on the same row, or above the node that's being dragged\n                // then move it to the right\n                translate.x = this.width + this.marginOffset.x;\n                if (edgeOffset.left + translate.x > this.containerBoundingRect.width - offset.width) {\n                  // If it moves passed the right bounds, then animate it to the first position of the next row.\n                  // We just use the offset of the next node to calculate where to move, because that node's original position\n                  // is exactly where we want to go\n                  translate.x = nextNode.edgeOffset.left - edgeOffset.left;\n                  translate.y = nextNode.edgeOffset.top - edgeOffset.top;\n                }\n                if (this.newIndex === null) {\n                  this.newIndex = index;\n                }\n              } else if (index > this.index && (sortingOffset.left + scrollDifference.left + offset.width >= edgeOffset.left && sortingOffset.top + scrollDifference.top + offset.height >= edgeOffset.top || sortingOffset.top + scrollDifference.top + offset.height >= edgeOffset.top + height)) {\n                // If the current node is to the right on the same row, or below the node that's being dragged\n                // then move it to the left\n                translate.x = -(this.width + this.marginOffset.x);\n                if (edgeOffset.left + translate.x < this.containerBoundingRect.left + offset.width) {\n                  // If it moves passed the left bounds, then animate it to the last position of the previous row.\n                  // We just use the offset of the previous node to calculate where to move, because that node's original position\n                  // is exactly where we want to go\n                  translate.x = prevNode.edgeOffset.left - edgeOffset.left;\n                  translate.y = prevNode.edgeOffset.top - edgeOffset.top;\n                }\n                this.newIndex = index;\n              }\n            } else {\n              if (index > this.index && sortingOffset.left + scrollDifference.left + offset.width >= edgeOffset.left) {\n                translate.x = -(this.width + this.marginOffset.x);\n                this.newIndex = index;\n              } else if (index < this.index && sortingOffset.left + scrollDifference.left <= edgeOffset.left + offset.width) {\n                translate.x = this.width + this.marginOffset.x;\n                if (this.newIndex == null) {\n                  this.newIndex = index;\n                }\n              }\n            }\n          } else if (this.axis.y) {\n            if (index > this.index && sortingOffset.top + scrollDifference.top + offset.height >= edgeOffset.top) {\n              translate.y = -(this.height + this.marginOffset.y);\n              this.newIndex = index;\n            } else if (index < this.index && sortingOffset.top + scrollDifference.top <= edgeOffset.top + offset.height) {\n              translate.y = this.height + this.marginOffset.y;\n              if (this.newIndex == null) {\n                this.newIndex = index;\n              }\n            }\n          }\n          node.style[_utils.vendorPrefix + 'Transform'] = 'translate3d(' + translate.x + 'px,' + translate.y + 'px,0)';\n        }\n\n        if (this.newIndex == null) {\n          this.newIndex = this.index;\n        }\n      }\n    }, {\n      key: 'getWrappedInstance',\n      value: function getWrappedInstance() {\n        (0, _invariant2.default)(config.withRef, 'To access the wrapped instance, you need to pass in {withRef: true} as the second argument of the SortableContainer() call');\n        return this.refs.wrappedInstance;\n      }\n    }, {\n      key: 'render',\n      value: function render() {\n        var ref = config.withRef ? 'wrappedInstance' : null;\n\n        return _react2.default.createElement(WrappedComponent, _extends({\n          ref: ref\n        }, (0, _utils.omit)(this.props, 'contentWindow', 'useWindowAsScrollContainer', 'distance', 'helperClass', 'hideSortableGhost', 'transitionDuration', 'useDragHandle', 'pressDelay', 'pressThreshold', 'shouldCancelStart', 'onSortStart', 'onSortMove', 'onSortEnd', 'axis', 'lockAxis', 'lockOffset', 'lockToContainerEdges', 'getContainer', 'getHelperDimensions')));\n      }\n    }]);\n\n    return _class;\n  }(_react.Component), _class.displayName = (0, _utils.provideDisplayName)('sortableList', WrappedComponent), _class.defaultProps = {\n    axis: 'y',\n    transitionDuration: 300,\n    pressDelay: 0,\n    pressThreshold: 5,\n    distance: 0,\n    useWindowAsScrollContainer: false,\n    hideSortableGhost: true,\n    shouldCancelStart: function shouldCancelStart(e) {\n      // Cancel sorting if the event target is an `input`, `textarea`, `select` or `option`\n      var disabledElements = ['input', 'textarea', 'select', 'option', 'button'];\n\n      if (disabledElements.indexOf(e.target.tagName.toLowerCase()) !== -1) {\n        return true; // Return true to cancel sorting\n      }\n    },\n    lockToContainerEdges: false,\n    lockOffset: '50%',\n    getHelperDimensions: function getHelperDimensions(_ref) {\n      var node = _ref.node;\n      return {\n        width: node.offsetWidth,\n        height: node.offsetHeight\n      };\n    }\n  }, _class.propTypes = {\n    axis: _propTypes2.default.oneOf(['x', 'y', 'xy']),\n    distance: _propTypes2.default.number,\n    lockAxis: _propTypes2.default.string,\n    helperClass: _propTypes2.default.string,\n    transitionDuration: _propTypes2.default.number,\n    contentWindow: _propTypes2.default.any,\n    onSortStart: _propTypes2.default.func,\n    onSortMove: _propTypes2.default.func,\n    onSortEnd: _propTypes2.default.func,\n    shouldCancelStart: _propTypes2.default.func,\n    pressDelay: _propTypes2.default.number,\n    useDragHandle: _propTypes2.default.bool,\n    useWindowAsScrollContainer: _propTypes2.default.bool,\n    hideSortableGhost: _propTypes2.default.bool,\n    lockToContainerEdges: _propTypes2.default.bool,\n    lockOffset: _propTypes2.default.oneOfType([_propTypes2.default.number, _propTypes2.default.string, _propTypes2.default.arrayOf(_propTypes2.default.oneOfType([_propTypes2.default.number, _propTypes2.default.string]))]),\n    getContainer: _propTypes2.default.func,\n    getHelperDimensions: _propTypes2.default.func\n  }, _class.childContextTypes = {\n    manager: _propTypes2.default.object.isRequired\n  }, _temp;\n}"]},"metadata":{},"sourceType":"script"}